# FROM pytorch/pytorch:1.12.1-cuda11.3-cudnn8-runtime
FROM python:3.8.18-alpine3.18

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update && \
    apt-get -y upgrade && \
    apt-get install -y git && \
    apt-get install -y curl && \
    apt-get install -y wget


WORKDIR /workdir

RUN git clone https://github.com/KevinArmbruster/optimal-summaries-public.git
RUN git config --global user.name "Kevin Armbruster"
RUN git config --global user.email "KevinArmbruster2013@gmail.com"


RUN pip install --upgrade pip
RUN pip install ipython notebook
RUN pip install numpy
RUN pip install pandas
RUN pip install matplotlib
RUN pip install scipy
RUN pip install scikit-learn
RUN pip install h5py
RUN pip install tables
RUN pip install rtpt
RUN pip install tqdm
RUN pip install seaborn squarify imblearn
RUN pip install optuna, plotly, kaleido
RUN pip install "notebook>=5.3" "ipywidgets>=7.5"
RUN pip install torch==1.12.0+cu113 torchvision==0.13.0+cu113 torchaudio==0.12.0 --extra-index-url https://download.pytorch.org/whl/cu113


# RUN echo "conda activate optimal-summaries" >> ~/.bashrc
# RUN conda config --set auto_activate_base false


#EXPOSE 8090
ENTRYPOINT ["top", "-b"]

# SETUP INSTRUCTIONS
# docker build -t optimal-summaries-env .
# docker run --name optimal-summaries-env3 -v /home/karmbruster/mimic-iii/physionet.org/export:/workdir/data -d optimal-summaries-env
